<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.text.Font?>
<?import javafx.collections.FXCollections?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.AreaChart?>
<?import javafx.scene.chart.StackedBarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="ui.HomeController"
            prefWidth="1400.0" prefHeight="800.0"
            styleClass="root-pane">

    <!-- HEADER -->
    <top>
        <VBox styleClass="header-container" spacing="0">
            <!-- Logo Section -->
            <HBox alignment="CENTER" spacing="0">
                <children>
                    <Region HBox.hgrow="ALWAYS"/>
                    <VBox spacing="0" alignment="CENTER" mouseTransparent="true">
                        <children>
                            <Region prefHeight="15.0" mouseTransparent="true"/>
                            <ImageView fx:id="headerLogoImageView" mouseTransparent="true">
                                <image>
                                    <Image url="@/images/logo.png"/>
                                </image>
                                <fitWidth>300.0</fitWidth>
                                <preserveRatio>true</preserveRatio>
                            </ImageView>
                            <Region prefHeight="10.0" mouseTransparent="true"/>
                        </children>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                </children>
                <padding>
                    <Insets top="8" right="32" bottom="0" left="32"/>
                </padding>
            </HBox>
            
            <!-- Navigation Buttons Below Logo -->
            <HBox styleClass="header-bar" alignment="CENTER" spacing="12" HBox.hgrow="ALWAYS">
                <children>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" fx:id="homeButton" styleClass="header-nav-button" HBox.hgrow="NEVER"/>
                    <Button text="Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÎ¿Ï€Î®ÏƒÎµÎ¹Ï‚ Î‘Î»Î»Î±Î³ÏÎ½" onAction="#onNavigateProjections" fx:id="projectionsButton" styleClass="header-nav-button" HBox.hgrow="NEVER"/>
                    <MenuButton text="Î£Ï…Î³ÎºÏÎ¯ÏƒÎµÎ¹Ï‚" fx:id="comparisonsMenuButton" styleClass="header-nav-button">
                        <items>
                            <MenuItem text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· ÎµÏ„ÏÎ½" onAction="#onNavigateComparison" fx:id="comparisonsMenuItem"/>
                            <MenuItem text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· ÎºÏÎ±Ï„ÏÎ½" onAction="#onNavigateInternationalComparison" fx:id="internationalComparisonMenuItem"/>
                        </items>
                    </MenuButton>
                    <Button text="Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î‘Î½Î±Î»ÏÏƒÎµÎ¹Ï‚" onAction="#onNavigateStatistics" fx:id="statisticsButton" styleClass="header-nav-button" HBox.hgrow="NEVER"/>
                    <Button text="AI Î’Î¿Î·Î¸ÏŒÏ‚" onAction="#onOpenAIAssistant" fx:id="aiAssistantButton" styleClass="header-nav-button" HBox.hgrow="NEVER"/>
                    <Button text="Î£ÏÎ½Î´ÎµÏƒÎ· Ï‰Ï‚ ÎšÏ…Î²Î­ÏÎ½Î·ÏƒÎ·" onAction="#onAuthButtonClicked" fx:id="authButton" styleClass="header-nav-button" HBox.hgrow="NEVER"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </children>
                <padding>
                    <Insets top="8" right="32" bottom="8" left="32"/>
                </padding>
            </HBox>
        </VBox>
    </top>

    <!-- CENTER CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="content-scroll" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER">
            <content>
                <VBox spacing="16" styleClass="content-container">
                    <padding>
                        <Insets top="16" right="80" bottom="16" left="80"/>
                    </padding>
                    <children>
                        
                                        <!-- HOME VIEW (Summary Cards) -->
                        <VBox fx:id="homeView" spacing="12" alignment="TOP_CENTER">
                            <children>
                                <!-- MAIN CONTENT: Year Selection + Summary Cards Full Width + Split Layout -->
                                <VBox spacing="12" alignment="TOP_CENTER">
                                    <children>
                                        <!-- Year Selection -->
                                        <HBox spacing="8" alignment="CENTER" style="-fx-padding: 0 0 16 0;">
                                            <children>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="yearComboBox" prefWidth="140" onAction="#onYearSelected" styleClass="year-combo-box"/>
                                                <Button text="âœ Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" onAction="#onHomeEditButtonClicked" fx:id="homeEditButton" styleClass="home-edit-button" visible="false" managed="false"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- SUMMARY CARDS (Full Width) -->
                                        <VBox alignment="CENTER">
                                            <children>
                                                <HBox styleClass="summary-row" spacing="45" alignment="CENTER">
                                                    <children>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                <VBox styleClass="summary-card" spacing="6">
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±" styleClass="summary-label"/>
                                                <Label fx:id="totalRevenuesLabel" text="â‚¬100,2 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="revenuesDeltaLabel" text="+2,3% Î±Ï€ÏŒ Ï€Î­ÏÏ…ÏƒÎ¹" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>

                                                <VBox styleClass="summary-card" spacing="6">
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="summary-label"/>
                                                <Label fx:id="totalExpensesLabel" text="â‚¬98,5 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="expensesDeltaLabel" text="+1,1% Î±Ï€ÏŒ Ï€Î­ÏÏ…ÏƒÎ¹" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>

                                                <VBox styleClass="summary-card" spacing="6">
                                            <children>
                                                <Label text="Î™ÏƒÎ¿Î¶ÏÎ³Î¹Î¿" styleClass="summary-label"/>
                                                <Label fx:id="balanceLabel" text="+â‚¬1,7 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="balanceStatusLabel" text="Î Î»ÎµÏŒÎ½Î±ÏƒÎ¼Î±" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                    </children>
                                                </HBox>
                                            </children>
                                        </VBox>

                                        <!-- SPLIT LAYOUT: Quick Nav Cards (Left) | Line Chart (Right) -->
                                        <GridPane hgap="20" vgap="0" alignment="CENTER">
                                            <columnConstraints>
                                                <ColumnConstraints hgrow="ALWAYS" minWidth="600" prefWidth="650"/>
                                                <ColumnConstraints hgrow="ALWAYS" minWidth="600" prefWidth="650"/>
                                            </columnConstraints>
                                            <rowConstraints>
                                                <RowConstraints vgrow="ALWAYS" prefHeight="420"/>
                                            </rowConstraints>
                                            
                                            <!-- LEFT: QUICK NAVIGATION CARDS -->
                                            <VBox spacing="16" GridPane.columnIndex="0">
                                                <GridPane.margin>
                                                    <Insets top="32" right="0" bottom="0" left="0"/>
                                                </GridPane.margin>
                                    <children>
                                                    <!-- QUICK NAVIGATION CARDS (2x2 Grid) -->
                                                    <GridPane hgap="12" vgap="12">
                                                        <columnConstraints>
                                                            <ColumnConstraints hgrow="ALWAYS" minWidth="280"/>
                                                            <ColumnConstraints hgrow="ALWAYS" minWidth="280"/>
                                                        </columnConstraints>
                                                        <rowConstraints>
                                                            <RowConstraints vgrow="ALWAYS" prefHeight="170"/>
                                                            <RowConstraints vgrow="ALWAYS" prefHeight="170"/>
                                                        </rowConstraints>
                                                        
                                                        <VBox styleClass="quick-nav-card" spacing="6" fx:id="quickNavMinistries" alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                                    <children>
                                                        <Label text="1" styleClass="quick-nav-number"/>
                                                        <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î± &amp; Î¦Î¿ÏÎµÎ¯Ï‚" styleClass="quick-nav-title"/>
                                                                <Label text="Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î±Ï€Î±Î½ÏÎ½ Î±Î½Î¬ Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿" styleClass="quick-nav-description"/>
                                                                <HBox spacing="4" alignment="CENTER">
                                                                    <children>
                                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±" styleClass="quick-nav-link" style="-fx-font-size: 12px;"/>
                                                                        <Label text="â†’" styleClass="quick-nav-link"/>
                                                                    </children>
                                                                </HBox>
                                                    </children>
                                                </VBox>

                                                        <VBox styleClass="quick-nav-card" spacing="6" fx:id="quickNavRevenues" alignment="CENTER" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                                    <children>
                                                        <Label text="2" styleClass="quick-nav-number"/>
                                                        <Label text="ÎˆÏƒÎ¿Î´Î±" styleClass="quick-nav-title"/>
                                                                <Label text="Î‘Î½Î¬Î»Ï…ÏƒÎ· Î•ÏƒÏŒÎ´Ï‰Î½" styleClass="quick-nav-description"/>
                                                                <HBox spacing="4" alignment="CENTER">
                                                                    <children>
                                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±" styleClass="quick-nav-link" style="-fx-font-size: 12px;"/>
                                                                        <Label text="â†’" styleClass="quick-nav-link"/>
                                                                    </children>
                                                                </HBox>
                                                    </children>
                                                </VBox>

                                                        <VBox styleClass="quick-nav-card" spacing="6" fx:id="quickNavExpenses" alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                                    <children>
                                                        <Label text="3" styleClass="quick-nav-number"/>
                                                        <Label text="Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="quick-nav-title"/>
                                                                <Label text="Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î±Ï€Î±Î½ÏÎ½ Î±Î½Î¬ Î•Î¯Î´Î¿Ï‚" styleClass="quick-nav-description"/>
                                                                <HBox spacing="4" alignment="CENTER">
                                                                    <children>
                                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±" styleClass="quick-nav-link" style="-fx-font-size: 12px;"/>
                                                                        <Label text="â†’" styleClass="quick-nav-link"/>
                                                                    </children>
                                                                </HBox>
                                                    </children>
                                                </VBox>

                                                        <VBox styleClass="quick-nav-card" spacing="6" fx:id="quickNavAdministrations" alignment="CENTER" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                                    <children>
                                                        <Label text="4" styleClass="quick-nav-number"/>
                                                        <Label text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½ÎµÏ‚ Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÎ¹Ï‚" styleClass="quick-nav-title"/>
                                                                <Label text="Î“ÎµÏ‰Î³ÏÎ±Ï†Î¹ÎºÎ® ÎšÎ±Ï„Î±Î½Î¿Î¼Î® Î”Î±Ï€Î±Î½ÏÎ½" styleClass="quick-nav-description"/>
                                                                <HBox spacing="4" alignment="CENTER">
                                                                    <children>
                                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±" styleClass="quick-nav-link" style="-fx-font-size: 12px;"/>
                                                                        <Label text="â†’" styleClass="quick-nav-link"/>
                                                                    </children>
                                                                </HBox>
                                                    </children>
                                                </VBox>
                                                    </GridPane>
                                            </children>
                                            </VBox>

                                            <!-- RIGHT: LINE CHART -->
                                            <VBox spacing="12" GridPane.columnIndex="1">
                                                <children>
                                                    <!-- LINE CHART -->
                                                    <VBox styleClass="section-card chart-card" spacing="8" VBox.vgrow="ALWAYS">
                                                        <padding>
                                                            <Insets top="16" right="16" bottom="16" left="16"/>
                                                        </padding>
                                                        <children>
                                                            <LineChart fx:id="lineHistory" title="Î Î¿ÏÎµÎ¯Î± Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" prefHeight="250" legendVisible="true" animated="false" VBox.vgrow="ALWAYS">
                                                                <xAxis>
                                                                    <CategoryAxis label="ÎˆÏ„Î¿Ï‚" />
                                                                </xAxis>
                                                                <yAxis>
                                                                    <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                                </yAxis>
                                                            </LineChart>
                                                        </children>
                                                    </VBox>
                                                </children>
                                            </VBox>
                                        </GridPane>
                                    </children>
                                </VBox>

                            </children>
                        </VBox>

                        <!-- MINISTRIES VIEW -->
                        <VBox fx:id="ministriesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button" style="-fx-position: fixed;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î± &amp; Î¦Î¿ÏÎµÎ¯Ï‚" styleClass="section-title" style="-fx-alignment: CENTER;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="ministriesYearComboBox" prefWidth="120" visible="true" managed="true" onAction="#onMinistriesYearSelected"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <GridPane hgap="16" vgap="16">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="ALWAYS" prefHeight="350"/>
                                    </rowConstraints>
                                    <children>
                                        <!-- Pie Chart - Top Ministries -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <PieChart fx:id="pieMinistries" title="ÎšÎ¿ÏÏ…Ï†Î±Î¯Î± Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î±" prefHeight="300" legendVisible="false" VBox.vgrow="ALWAYS"/>
                                            </children>
                                        </VBox>
                                        <!-- Area Chart - Historical Trend -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <AreaChart fx:id="areaMinistriesTrend" title="Î•Î¾Î­Î»Î¹Î¾Î· Î”Î±Ï€Î±Î½ÏÎ½ Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Ï‰Î½" prefHeight="300" legendVisible="false" VBox.vgrow="ALWAYS">
                                                    <xAxis>
                                                        <CategoryAxis label="ÎˆÏ„Î¿Ï‚" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                    </yAxis>
                                                </AreaChart>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="48" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="categoryTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="categoryColumn" text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿ / Î¦Î¿ÏÎ­Î±Ï‚" prefWidth="400"/>
                                                <TableColumn fx:id="amountColumn" text="Î”Î±Ï€Î¬Î½ÎµÏ‚ (â‚¬)" prefWidth="220"/>
                                                <TableColumn fx:id="percentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="180"/>
                                                <TableColumn fx:id="changeColumn" text="ÎœÎµÏ„Î±Î²Î¿Î»Î® Î±Ï€ÏŒ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î­Ï„Î¿Ï‚" prefWidth="250"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- REVENUES VIEW -->
                        <VBox fx:id="revenuesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button" style="-fx-position: fixed;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="ÎˆÏƒÎ¿Î´Î±" styleClass="section-title" style="-fx-alignment: CENTER;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="revenuesYearComboBox" prefWidth="120" visible="true" managed="true" onAction="#onRevenuesYearSelected"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <GridPane hgap="16" vgap="16">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="ALWAYS" prefHeight="300"/>
                                    </rowConstraints>
                                    <children>
                                        <!-- Pie Chart -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <PieChart fx:id="pieRevenue" title="" prefHeight="250" legendVisible="false" VBox.vgrow="ALWAYS"/>
                                            </children>
                                        </VBox>
                                        <!-- Area Chart - Historical Trend -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <AreaChart fx:id="areaRevenueTrend" title="" prefHeight="250" legendVisible="false" VBox.vgrow="ALWAYS">
                                                    <xAxis>
                                                        <CategoryAxis label="ÎˆÏ„Î¿Ï‚" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                    </yAxis>
                                                </AreaChart>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <Label text="Î›ÎµÏ€Ï„Î¿Î¼ÎµÏÎ®Ï‚ Î‘Î½Î¬Î»Ï…ÏƒÎ· Î•ÏƒÏŒÎ´Ï‰Î½" styleClass="section-title"/>
                                        <TableView fx:id="revenuesTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="revenueCategoryColumn" text="Î•Î¯Î´Î¿Ï‚ ÎˆÏƒÎ¿Î´Ï‰Î½" prefWidth="450"/>
                                                <TableColumn fx:id="revenueAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="revenuePercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- EXPENSES VIEW -->
                        <VBox fx:id="expensesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button" style="-fx-position: fixed;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="section-title" style="-fx-alignment: CENTER;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="expensesYearComboBox" prefWidth="120" visible="true" managed="true" onAction="#onExpensesYearSelected"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <GridPane hgap="16" vgap="16">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="ALWAYS" prefHeight="300"/>
                                    </rowConstraints>
                                    <children>
                                        <!-- Pie Chart -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <PieChart fx:id="pieExpenses" title="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ Î”Î±Ï€Î±Î½ÏÎ½" prefHeight="250" legendVisible="false" VBox.vgrow="ALWAYS"/>
                                            </children>
                                        </VBox>
                                        <!-- Area Chart - Historical Trend -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <AreaChart fx:id="areaExpenseTrend" title="Î•Î¾Î­Î»Î¹Î¾Î· Î”Î±Ï€Î±Î½ÏÎ½" prefHeight="250" legendVisible="false" VBox.vgrow="ALWAYS">
                                                    <xAxis>
                                                        <CategoryAxis label="ÎˆÏ„Î¿Ï‚" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                    </yAxis>
                                                </AreaChart>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <Label text="Î›ÎµÏ€Ï„Î¿Î¼ÎµÏÎ®Ï‚ Î‘Î½Î¬Î»Ï…ÏƒÎ· Î”Î±Ï€Î±Î½ÏÎ½" styleClass="section-title"/>
                                        <TableView fx:id="expensesTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="expenseCategoryColumn" text="Î•Î¯Î´Î¿Ï‚ Î”Î±Ï€Î±Î½ÏÎ½" prefWidth="450"/>
                                                <TableColumn fx:id="expenseAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="expensePercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- ADMINISTRATIONS VIEW -->
                        <VBox fx:id="administrationsView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button" style="-fx-position: fixed;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½ÎµÏ‚ Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÎ¹Ï‚" styleClass="section-title" style="-fx-alignment: CENTER;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="administrationsYearComboBox" prefWidth="120" visible="true" managed="true" onAction="#onAdministrationsYearSelected"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <GridPane hgap="16" vgap="16">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                        <ColumnConstraints hgrow="ALWAYS" minWidth="400"/>
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints vgrow="ALWAYS" prefHeight="350"/>
                                    </rowConstraints>
                                    <children>
                                        <!-- Bar Chart - Top Administrations -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <BarChart fx:id="barAdministrationsTop" title="Top Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÎ¹Ï‚" prefHeight="300" legendVisible="false" VBox.vgrow="ALWAYS">
                                                    <xAxis>
                                                        <CategoryAxis label="Î”Î¹Î¿Î¯ÎºÎ·ÏƒÎ·" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                    </yAxis>
                                                </BarChart>
                                            </children>
                                        </VBox>
                                        <!-- Area Chart - Historical Trend -->
                                        <VBox styleClass="section-card chart-card" spacing="12" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <AreaChart fx:id="areaAdministrationsTrend" title="Î”Î¹Î±Ï‡ÏÎ¿Î½Î¹ÎºÎ® Î•Î¾Î­Î»Î¹Î¾Î· Î”Î±Ï€Î±Î½ÏÎ½ Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Ï‰Î½ Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÏ‰Î½" prefHeight="300" legendVisible="false" VBox.vgrow="ALWAYS">
                                                    <xAxis>
                                                        <CategoryAxis label="ÎˆÏ„Î¿Ï‚" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)" />
                                                    </yAxis>
                                                </AreaChart>
                                            </children>
                                        </VBox>
                                    </children>
                                </GridPane>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="64" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="administrationsTable" prefHeight="250">
                                            <columns>
                                                <TableColumn fx:id="adminCategoryColumn" text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Î· Î”Î¹Î¿Î¯ÎºÎ·ÏƒÎ·" prefWidth="550"/>
                                                <TableColumn fx:id="adminAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="adminPercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- DATA MANAGEMENT VIEW (Government Only) -->
                        <VBox fx:id="dataManagementView" spacing="20" alignment="TOP_CENTER" visible="false" managed="false" styleClass="data-management-container">
                            <children>
                                <!-- Header Section -->
                                <VBox spacing="20" styleClass="section-card header-section" alignment="CENTER">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Top Row: Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER">
                                            <children>
                                                 <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button-modern" prefWidth="140" prefHeight="38" style="-fx-position: fixed;"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label fx:id="dataManagementYearTitleLabel" text="Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÎˆÏ„Î¿Ï…Ï‚ 2026" styleClass="page-title-centered"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Region prefWidth="140"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Year Selection -->
                                        <HBox spacing="8" alignment="CENTER" style="-fx-padding: 0 0 16 0;">
                                            <children>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="dataManagementYearComboBox" prefWidth="140" onAction="#onDataManagementYearSelected" styleClass="year-combo-box"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                
                                <!-- Statistics Summary Cards -->
                                <HBox spacing="16" alignment="CENTER" styleClass="stats-container">
                                    <padding>
                                        <Insets left="80" right="80"/>
                                    </padding>
                                    <children>
                                        <!-- Revenues Card -->
                                        <VBox spacing="12" styleClass="stat-card revenue-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" prefWidth="350" prefHeight="120" minWidth="300" minHeight="120" maxWidth="400" maxHeight="120" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±" styleClass="stat-label"/>
                                                <Label fx:id="dmTotalRevenuesLabel" text="0 â‚¬" styleClass="stat-value-large revenue-value"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Expenses Card -->
                                        <VBox spacing="12" styleClass="stat-card expense-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" prefWidth="350" prefHeight="120" minWidth="300" minHeight="120" maxWidth="400" maxHeight="120" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="stat-label"/>
                                                <Label fx:id="dmTotalExpensesLabel" text="0 â‚¬" styleClass="stat-value-large expense-value"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Balance Card -->
                                        <VBox spacing="12" styleClass="stat-card balance-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" prefWidth="350" prefHeight="120" minWidth="300" minHeight="120" maxWidth="400" maxHeight="120" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿" styleClass="stat-label"/>
                                                <Label fx:id="dmBalanceLabel" text="0 â‚¬" styleClass="stat-value-large balance-value"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                                
                                <!-- Main Data Table Card -->
                                <VBox spacing="20" styleClass="section-card data-table-section">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Action Buttons Row -->
                                        <HBox spacing="12" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="ğŸ“¥ Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®" onAction="#onImportData" styleClass="action-button" prefWidth="130" prefHeight="40"/>
                                                <Button text="ğŸ“¤ Î•Î¾Î±Î³Ï‰Î³Î®" onAction="#onExportData" styleClass="action-button" prefWidth="120" prefHeight="40"/>
                                                <Button text="ğŸ“‚ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½Ï‰Î½ Î±Î»Î»Î±Î³ÏÎ½" onAction="#onLoadScenario" styleClass="action-button" prefWidth="280" prefHeight="40"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Search and Filter Bar -->
                                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="search-filter-bar">
                                            <padding>
                                                <Insets top="12" right="16" bottom="12" left="16"/>
                                            </padding>
                                            <children>
                                                <HBox spacing="8" alignment="CENTER_LEFT">
                                                    <Label text="ğŸ”" style="-fx-font-size: 18px;"/>
                                                    <TextField fx:id="dmSearchField" promptText="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚..." prefWidth="280" prefHeight="38" onKeyReleased="#onSearchData" styleClass="search-field"/>
                                                </HBox>
                                                <ComboBox fx:id="dmTypeFilter" promptText="ÎŒÎ»Î¿Î¹ Î¿Î¹ Ï„ÏÏ€Î¿Î¹" prefWidth="160" prefHeight="38" onAction="#onFilterData" styleClass="filter-combo"/>
                                                <Button text="ğŸ”„ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚" onAction="#onClearFilters" styleClass="clear-filter-button" prefWidth="140" prefHeight="38"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Revenues and Expenses Tabs -->
                                        <TabPane fx:id="revenuesExpensesTabPane" styleClass="tab-pane">
                                            <tabs>
                                                <Tab text="ÎˆÏƒÎ¿Î´Î±">
                                                    <content>
                                                        <VBox spacing="12">
                                                            <children>
                                                                <TableView fx:id="dmRevenuesTable" prefHeight="500" styleClass="data-table">
                                                                    <columns>
                                                                        <TableColumn fx:id="revSelectColumn" text="" prefWidth="50" sortable="false"/>
                                                                        <TableColumn fx:id="revCategoryColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="350" sortable="true"/>
                                                                        <TableColumn fx:id="revAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="250" sortable="true"/>
                                                                        <TableColumn fx:id="revActionsColumn" text="" prefWidth="100" sortable="false" visible="false"/>
                                                                        <TableColumn fx:id="revCommentsColumn" text="Î£Ï‡ÏŒÎ»Î¹Î±" prefWidth="400" sortable="false" visible="false"/>
                                                                    </columns>
                                                                </TableView>
                                                            </children>
                                                        </VBox>
                                                    </content>
                                                </Tab>
                                                <Tab text="Î”Î±Ï€Î¬Î½ÎµÏ‚">
                                                    <content>
                                                        <VBox spacing="12">
                                                            <children>
                                                                <TableView fx:id="dmExpensesTable" prefHeight="500" styleClass="data-table">
                                                                    <columns>
                                                                        <TableColumn fx:id="expSelectColumn" text="" prefWidth="50" sortable="false"/>
                                                                        <TableColumn fx:id="expCategoryColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="350" sortable="true"/>
                                                                        <TableColumn fx:id="expAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="250" sortable="true"/>
                                                                        <TableColumn fx:id="expActionsColumn" text="" prefWidth="100" sortable="false" visible="false"/>
                                                                        <TableColumn fx:id="expCommentsColumn" text="Î£Ï‡ÏŒÎ»Î¹Î±" prefWidth="400" sortable="false" visible="false"/>
                                                                    </columns>
                                                                </TableView>
                                                            </children>
                                                        </VBox>
                                                    </content>
                                                </Tab>
                                            </tabs>
                                        </TabPane>
                                        
                                        <!-- Table Actions -->
                                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="table-actions-bar">
                                            <padding>
                                                <Insets top="12" right="0" bottom="0" left="0"/>
                                            </padding>
                                            <children>
                                                <Button text="âœ Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" onAction="#onEditData" styleClass="table-action-button" fx:id="editDataButton" prefWidth="140" prefHeight="38"/>
                                                <Button text="ğŸ—‘ Î”Î¹Î±Î³ÏÎ±Ï†Î®" onAction="#onDeleteSelected" styleClass="table-action-button danger" fx:id="deleteDataButton" prefWidth="130" prefHeight="38" visible="false" managed="false"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Button text="âœ“ Î•Ï€Î¹Î»Î¿Î³Î® ÎŒÎ»Ï‰Î½" onAction="#onSelectAll" styleClass="table-action-button secondary" fx:id="selectAllButton" prefWidth="140" prefHeight="38" visible="false" managed="false"/>
                                                <Button text="âœ— Î‘Ï€Î¿ÎµÏ€Î¹Î»Î¿Î³Î®" onAction="#onDeselectAll" styleClass="table-action-button secondary" fx:id="deselectAllButton" prefWidth="130" prefHeight="38" visible="false" managed="false"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                
                                <!-- Internal Comments Section -->
                                <VBox spacing="16" styleClass="section-card comments-section">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <Label text="ğŸ’¬" style="-fx-font-size: 20px;"/>
                                            <Label text="Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬ Î£Ï‡ÏŒÎ»Î¹Î±" styleClass="section-title"/>
                                        </HBox>
                                        <Label text="Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ ÏƒÏ‡ÏŒÎ»Î¹Î± ÎºÎ±Î¹ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± (Î¿ÏÎ±Ï„Î¬ Î¼ÏŒÎ½Î¿ ÏƒÏ„Î·Î½ ÎºÏ…Î²Î­ÏÎ½Î·ÏƒÎ·)" styleClass="section-subtitle" style="-fx-text-fill: #64748b; -fx-font-size: 13px;"/>
                                        <TextArea fx:id="internalCommentsArea" prefRowCount="5" wrapText="true" promptText="Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ ÎµÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬ ÏƒÏ‡ÏŒÎ»Î¹Î±..." styleClass="comments-textarea"/>
                                        <HBox spacing="12" alignment="CENTER_RIGHT">
                                            <children>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Button text="ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î£Ï‡Î¿Î»Î¯Ï‰Î½" onAction="#onSaveComments" styleClass="save-comments-button" prefWidth="180" prefHeight="38"/>
                                                <Button text="ğŸ’¾ Î ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î® Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î±Î»Î»Î±Î³ÏÎ½" onAction="#onSaveScenario" styleClass="action-button" prefWidth="260" prefHeight="40"/>
                                                <Button fx:id="publishYearButton" text="Î”Î·Î¼Î¿ÏƒÎ¯ÎµÏ…ÏƒÎ· Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" onAction="#onPublishYear" styleClass="publish-button" prefWidth="240" prefHeight="40" visible="false" managed="false"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>
                        
                        <!-- DATA EXPLORATION VIEW -->
                        <VBox fx:id="dataExplorationView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="16" alignment="TOP_CENTER">
                                    <padding>
                                        <Insets top="16" right="80" bottom="16" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î•Ï„ÏÎ½" styleClass="section-title"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        
                                <HBox spacing="20" alignment="TOP_LEFT">
                                    <children>
                                        <!-- Sidebar with view categories -->
                                        <VBox fx:id="explorationSidebar" spacing="12" styleClass="exploration-sidebar" prefWidth="280">
                                            <padding>
                                                <Insets top="20" right="16" bottom="20" left="16"/>
                                            </padding>
                                            <children>
                                                <Label text="Î¤ÏÏ€Î¿Ï‚ Î ÏÎ¿Î²Î¿Î»Î®Ï‚" styleClass="section-title" style="-fx-font-size: 16px; -fx-padding: 6 0 8 0;"/>
                                                
                                                <Button text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±/Î”Î±Ï€Î¬Î½ÎµÏ‚" onAction="#onSelectExplorationView" fx:id="exploreTotalButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="Î‘Î½Î¬ Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿" onAction="#onSelectExplorationView" fx:id="exploreMinistryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="Î‘Î½Î¬ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÎˆÏƒÏŒÎ´Ï‰Î½" onAction="#onSelectExplorationView" fx:id="exploreRevenueCategoryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="Î‘Î½Î¬ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î”Î±Ï€Î±Î½ÏÎ½" onAction="#onSelectExplorationView" fx:id="exploreExpenseCategoryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î•Ï„ÏÎ½" onAction="#onComparisonYearsClicked" fx:id="exploreComparisonButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="Î¤Î¬ÏƒÎµÎ¹Ï‚ &amp; Î‘Î»Î»Î±Î³Î­Ï‚" onAction="#onSelectExplorationView" fx:id="exploreTrendsButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Main content area -->
                                        <VBox spacing="24" HBox.hgrow="ALWAYS" alignment="CENTER">
                                            <children>
                                                <!-- Title -->
                                                <Label fx:id="exploreViewTitleLabel" text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï Î¼ÎµÏ„Î±Î¾Ï Î´ÏÎ¿ ÎµÏ„ÏÎ½" styleClass="comparison-results-title">
                                                    <VBox.margin>
                                                        <Insets top="0" bottom="30"/>
                                                    </VBox.margin>
                                                </Label>
                                                
                                                <!-- Comparison Controls and Overview Chart - Side by side -->
                                                <HBox fx:id="comparisonAndChartContainer" spacing="20" alignment="CENTER_LEFT" visible="true" managed="true">
                                                    <children>
                                                        <!-- Comparison Controls - Left side -->
                                                        <VBox fx:id="exploreComparisonControls" spacing="16" alignment="CENTER" visible="true" managed="true" styleClass="section-card">
                                                            <padding>
                                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                                            </padding>
                                                            <children>
                                                                <HBox spacing="16" alignment="CENTER">
                                                                    <children>
                                                                        <ComboBox fx:id="exploreYear1ComboBox" prefWidth="180" styleClass="comparison-combo" promptText="Î•Ï€Î¹Î»Î¿Î³Î® Î­Ï„Î¿Ï…Ï‚ 1"/>
                                                                        <ComboBox fx:id="exploreYear2ComboBox" prefWidth="180" styleClass="comparison-combo" promptText="Î•Ï€Î¹Î»Î¿Î³Î® Î­Ï„Î¿Ï…Ï‚ 2"/>
                                                                    </children>
                                                                </HBox>
                                                                <Button text="OK" onAction="#onLoadComparison" styleClass="comparison-ok-button" fx:id="exploreLoadComparisonButton"/>
                                                            </children>
                                                        </VBox>
                                                        
                                                        <!-- Overview Chart - Right side -->
                                                        <VBox fx:id="overviewChartsContainer" spacing="12" styleClass="section-card" visible="true" managed="true" HBox.hgrow="ALWAYS">
                                                            <padding>
                                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                                            </padding>
                                                            <children>
                                                                <!-- Revenue and Expenses Trends Line Chart -->
                                                                <LineChart fx:id="overviewTrendsChart" title="Î•Î¾Î­Î»Î¹Î¾Î· Î•ÏƒÏŒÎ´Ï‰Î½ ÎºÎ±Î¹ Î”Î±Ï€Î±Î½ÏÎ½" prefHeight="350" prefWidth="700">
                                                                    <xAxis>
                                                                        <CategoryAxis label="ÎˆÏ„Î·" animated="false"/>
                                                                    </xAxis>
                                                                    <yAxis>
                                                                        <NumberAxis label="Î Î¿ÏƒÏŒ (â‚¬)"/>
                                                                    </yAxis>
                                                                </LineChart>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                                
                                                <!-- Dynamic filters for other views -->
                                                <VBox fx:id="exploreDynamicFilters" spacing="12" visible="false" managed="false">
                                                    <children>
                                                        <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿:" styleClass="section-subtitle" fx:id="exploreMinistryLabel" visible="false" managed="false"/>
                                                        <ComboBox fx:id="exploreMinistryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                        
                                                        <Label text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÎˆÏƒÏŒÎ´Ï‰Î½:" styleClass="section-subtitle" fx:id="exploreRevenueCategoryLabel" visible="false" managed="false"/>
                                                        <ComboBox fx:id="exploreRevenueCategoryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                        
                                                        <Label text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î”Î±Ï€Î±Î½ÏÎ½:" styleClass="section-subtitle" fx:id="exploreExpenseCategoryLabel" visible="false" managed="false"/>
                                                        <ComboBox fx:id="exploreExpenseCategoryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                        
                                                        <HBox spacing="8" alignment="CENTER_LEFT" visible="true">
                                                            <children>
                                                                <ComboBox fx:id="exploreYearComboBox" prefWidth="120" onAction="#onExploreYearSelected"/>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>
                                                
                                                <!-- Results table -->
                                                <TableView fx:id="exploreResultsTable" prefHeight="400" VBox.vgrow="NEVER" visible="false" managed="false">
                                                    <columns>
                                                        <TableColumn fx:id="exploreColumn1" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="350" sortable="true"/>
                                                        <TableColumn fx:id="exploreColumn2" text="ÎˆÏ„Î¿Ï‚ 1 (â‚¬)" prefWidth="200" sortable="true"/>
                                                        <TableColumn fx:id="exploreColumn3" text="ÎˆÏ„Î¿Ï‚ 2 (â‚¬)" prefWidth="200" sortable="true"/>
                                                        <TableColumn fx:id="exploreColumn4" text="Î”Î¹Î±Ï†Î¿ÏÎ¬ (â‚¬)" prefWidth="200" sortable="true"/>
                                                        <TableColumn fx:id="exploreColumn5" text="Î‘Î»Î»Î±Î³Î®" prefWidth="150" sortable="true"/>
                                                    </columns>
                                                </TableView>
                                                
                                                <!-- Comparison Charts -->
                                                <VBox spacing="12" styleClass="section-card" visible="false" managed="false" fx:id="yearComparisonChartContainer">
                                                    <padding>
                                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                                    </padding>
                                                    <children>
                                                        <Label text="Î“ÏÎ±Ï†Î¹ÎºÎ® Î‘Î½Î±Ï€Î±ÏÎ¬ÏƒÏ„Î±ÏƒÎ·" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                        
                                                        <!-- Revenue vs Expenses Comparison -->
                                                        <BarChart fx:id="yearComparisonRevenueExpensesChart" title="ÎˆÏƒÎ¿Î´Î± vs Î”Î±Ï€Î¬Î½ÎµÏ‚" prefHeight="400" prefWidth="800">
                                                            <xAxis>
                                                                <CategoryAxis fx:id="yearCompRevExpXAxis" label="ÎˆÏ„Î·"/>
                                                            </xAxis>
                                                            <yAxis>
                                                                <NumberAxis fx:id="yearCompRevExpYAxis" label="Î Î¿ÏƒÏŒ (â‚¬)"/>
                                                            </yAxis>
                                                        </BarChart>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- INTERNATIONAL COMPARISON VIEW -->
                        <VBox fx:id="internationalComparisonView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="16" alignment="TOP_CENTER">
                                    <padding>
                                        <Insets top="16" right="80" bottom="16" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· ÎšÏÎ±Ï„ÏÎ½" styleClass="section-title"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        <Label text="Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î´Î¹ÎµÎ¸Î½ÏÎ½ Î´ÎµÎ¹ÎºÏ„ÏÎ½ Î¼ÎµÏ„Î±Î¾Ï Î´ÏÎ¿ ÎºÏÎ±Ï„ÏÎ½" styleClass="section-subtitle"/>
                                        
                                        <!-- Controls -->
                                        <VBox spacing="16" styleClass="section-card" alignment="CENTER">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <HBox spacing="16" alignment="CENTER">
                                                    <children>
                                                        <Label text="ÎˆÏ„Î¿Ï‚:" styleClass="section-subtitle"/>
                                                        <ComboBox fx:id="internationalYearComboBox" prefWidth="150" styleClass="comparison-combo" promptText="Î•Ï€Î¹Î»Î¿Î³Î® Î­Ï„Î¿Ï…Ï‚"/>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                        <Label text="ÎšÏÎ¬Ï„Î¿Ï‚ 1:" styleClass="section-subtitle"/>
                                                        <ComboBox fx:id="internationalCountry1ComboBox" prefWidth="200" styleClass="comparison-combo" promptText="Î•Ï€Î¹Î»Î¿Î³Î® ÎºÏÎ¬Ï„Î¿Ï…Ï‚ 1"/>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                        <Label text="ÎšÏÎ¬Ï„Î¿Ï‚ 2:" styleClass="section-subtitle"/>
                                                        <ComboBox fx:id="internationalCountry2ComboBox" prefWidth="200" styleClass="comparison-combo" promptText="Î•Ï€Î¹Î»Î¿Î³Î® ÎºÏÎ¬Ï„Î¿Ï…Ï‚ 2"/>
                                                    </children>
                                                </HBox>
                                                <Button text="OK" onAction="#onLoadInternationalComparison" styleClass="comparison-ok-button" fx:id="loadInternationalComparisonButton"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Results -->
                                        <VBox spacing="12" styleClass="section-card" visible="false" managed="false" fx:id="internationalResultsContainer">
                                            <padding>
                                                <Insets top="20" right="20" bottom="20" left="20"/>
                                            </padding>
                                            <children>
                                                <Label fx:id="internationalComparisonTitle" text="" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                <TableView fx:id="internationalComparisonTable" prefHeight="400" VBox.vgrow="ALWAYS">
                                                    <columns>
                                                        <TableColumn fx:id="intIndicatorColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="250" sortable="true"/>
                                                        <TableColumn fx:id="intCountry1Column" text="ÎšÏÎ¬Ï„Î¿Ï‚ 1" prefWidth="250" sortable="true"/>
                                                        <TableColumn fx:id="intCountry2Column" text="ÎšÏÎ¬Ï„Î¿Ï‚ 2" prefWidth="250" sortable="true"/>
                                                        <TableColumn fx:id="intDifferenceColumn" text="Î”Î¹Î±Ï†Î¿ÏÎ¬" prefWidth="200" sortable="true"/>
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                        
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- STATISTICS VIEW -->
                        <VBox fx:id="statisticsView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="16" alignment="TOP_CENTER">
                                    <padding>
                                        <Insets top="16" right="80" bottom="16" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î‘Î½Î±Î»ÏÏƒÎµÎ¹Ï‚ Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" styleClass="section-title"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        <Label text="Î ÏÎ¿Ï‡Ï‰ÏÎ·Î¼Î­Î½ÎµÏ‚ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î±Î½Î±Î»ÏÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î­ÏƒÎ¿Î´Î±, Î´Î±Ï€Î¬Î½ÎµÏ‚ ÎºÎ±Î¹ Ï„Î¬ÏƒÎµÎ¹Ï‚" styleClass="section-subtitle"/>
                                        
                                        <!-- Year Selection -->
                                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="section-card">
                                            <padding>
                                                <Insets top="16" right="20" bottom="16" left="20"/>
                                            </padding>
                                            <children>
                                                <Label text="Î ÎµÏÎ¯Î¿Î´Î¿Ï‚:" styleClass="section-subtitle"/>
                                                <Label text="Î‘Ï€ÏŒ:" styleClass="section-subtitle"/>
                                                <ComboBox fx:id="statisticsStartYearComboBox" prefWidth="120"/>
                                                <Label text="ÎˆÏ‰Ï‚:" styleClass="section-subtitle"/>
                                                <ComboBox fx:id="statisticsEndYearComboBox" prefWidth="120"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Button text="ğŸ”„ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏÎ½" onAction="#onCalculateStatistics" styleClass="action-button" fx:id="calculateStatisticsButton"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Statistics Cards -->
                                        <GridPane hgap="20" vgap="20">
                                            <columnConstraints>
                                                <ColumnConstraints hgrow="ALWAYS" prefWidth="300"/>
                                                <ColumnConstraints hgrow="ALWAYS" prefWidth="300"/>
                                                <ColumnConstraints hgrow="ALWAYS" prefWidth="300"/>
                                            </columnConstraints>
                                            
                                            <!-- Revenues Statistics -->
                                            <VBox spacing="12" styleClass="section-card" GridPane.columnIndex="0">
                                                <padding>
                                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                                </padding>
                                            <children>
                                                    <Label text="Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î•ÏƒÏŒÎ´Ï‰Î½" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                    <Label text="ÎœÎ­ÏƒÎ¿Ï‚ ÎŒÏÎ¿Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueMeanLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î”Î¹Î¬Î¼ÎµÏƒÎ¿Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueMedianLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î¤Ï…Ï€Î¹ÎºÎ® Î‘Ï€ÏŒÎºÎ»Î¹ÏƒÎ·:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueStdDevLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î”Î¹Î±ÎºÏÎ¼Î±Î½ÏƒÎ·:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueVarianceLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î£Ï…Î½Ï„ÎµÎ»ÎµÏƒÏ„Î®Ï‚ ÎœÎµÏ„Î±Î²Î»Î·Ï„ÏŒÏ„Î·Ï„Î±Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueCoeffVarLabel" text="-" styleClass="stat-value"/>
                                                </children>
                                            </VBox>
                                                
                                            <!-- Expenses Statistics -->
                                            <VBox spacing="12" styleClass="section-card" GridPane.columnIndex="1">
                                                <padding>
                                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                                </padding>
                                                    <children>
                                                    <Label text="Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î”Î±Ï€Î±Î½ÏÎ½" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                    <Label text="ÎœÎ­ÏƒÎ¿Ï‚ ÎŒÏÎ¿Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseMeanLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î”Î¹Î¬Î¼ÎµÏƒÎ¿Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseMedianLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î¤Ï…Ï€Î¹ÎºÎ® Î‘Ï€ÏŒÎºÎ»Î¹ÏƒÎ·:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseStdDevLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î”Î¹Î±ÎºÏÎ¼Î±Î½ÏƒÎ·:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseVarianceLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î£Ï…Î½Ï„ÎµÎ»ÎµÏƒÏ„Î®Ï‚ ÎœÎµÏ„Î±Î²Î»Î·Ï„ÏŒÏ„Î·Ï„Î±Ï‚:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseCoeffVarLabel" text="-" styleClass="stat-value"/>
                                                </children>
                                            </VBox>
                                            
                                            <!-- Correlation & Trends -->
                                            <VBox spacing="12" styleClass="section-card" GridPane.columnIndex="2">
                                                <padding>
                                                    <Insets top="20" right="20" bottom="20" left="20"/>
                                                </padding>
                                                <children>
                                                    <Label text="Î£Ï…ÏƒÏ‡Î­Ï„Î¹ÏƒÎ· &amp; Î¤Î¬ÏƒÎµÎ¹Ï‚" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                    <Label text="Î£Ï…ÏƒÏ‡Î­Ï„Î¹ÏƒÎ· ÎˆÏƒÏŒÎ´Ï‰Î½-Î”Î±Ï€Î±Î½ÏÎ½:" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsCorrelationLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î¤Î¬ÏƒÎ· Î•ÏƒÏŒÎ´Ï‰Î½ (Î³ÏÎ±Î¼Î¼Î¹ÎºÎ®):" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsRevenueTrendLabel" text="-" styleClass="stat-value"/>
                                                    <Label text="Î¤Î¬ÏƒÎ· Î”Î±Ï€Î±Î½ÏÎ½ (Î³ÏÎ±Î¼Î¼Î¹ÎºÎ®):" styleClass="section-subtitle"/>
                                                    <Label fx:id="statsExpenseTrendLabel" text="-" styleClass="stat-value"/>
                                                    </children>
                                            </VBox>
                                                </GridPane>
                                                
                                        <!-- Outliers Table -->
                                        <VBox spacing="12" styleClass="section-card">
                                            <padding>
                                                <Insets top="24" right="24" bottom="24" left="24"/>
                                            </padding>
                                                    <children>
                                                <Label text="Î‘ÎºÏÎ±Î¯ÎµÏ‚ Î¤Î¹Î¼Î­Ï‚ (Outliers)" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                <Label text="ÎˆÏ„Î· Î¼Îµ Î±ÏƒÏ…Î½Î®Î¸Î¹ÏƒÏ„Î± Ï…ÏˆÎ·Î»Î­Ï‚ Î® Ï‡Î±Î¼Î·Î»Î­Ï‚ Ï„Î¹Î¼Î­Ï‚" styleClass="section-subtitle"/>
                                                
                                                <TableView fx:id="statisticsOutliersTable" prefHeight="200">
                                                    <columns>
                                                        <TableColumn fx:id="statsOutlierYearColumn" text="ÎˆÏ„Î¿Ï‚" prefWidth="100" sortable="true"/>
                                                        <TableColumn fx:id="statsOutlierTypeColumn" text="Î¤ÏÏ€Î¿Ï‚" prefWidth="150" sortable="true"/>
                                                        <TableColumn fx:id="statsOutlierValueColumn" text="Î¤Î¹Î¼Î® (â‚¬)" prefWidth="200" sortable="true"/>
                                                        <TableColumn fx:id="statsOutlierZScoreColumn" text="Z-Score" prefWidth="150" sortable="true"/>
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- PROJECTIONS/SIMULATIONS VIEW -->
                        <VBox fx:id="projectionsView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="16" alignment="TOP_CENTER">
                                    <padding>
                                        <Insets top="16" right="80" bottom="16" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label text="Î ÏÎ¿ÏƒÎ¿Î¼Î¿Î¹ÏÏƒÎµÎ¹Ï‚ Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" styleClass="section-title"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <ComboBox fx:id="simulationBaseYearComboBox" onAction="#onSimulationBaseYearSelected" prefWidth="170.0" prefHeight="50" minHeight="50" maxHeight="50"/>
                                            </children>
                                        </HBox>
                                        
                                        <VBox spacing="8" alignment="TOP_CENTER">
                                            <children>
                                        <!-- Simulation Configuration -->
                                        <VBox spacing="16" styleClass="section-card">
                                            <padding>
                                                <Insets top="24" right="24" bottom="24" left="24"/>
                                            </padding>
                                            <children>
                                                <!-- Type Selection Tabs -->
                                                <TabPane fx:id="simulationTypeTabPane" styleClass="simulation-tab-pane" tabMinHeight="0" tabMaxHeight="50">
                                                    <tabs>
                                                        <Tab text="ÎœÎµÏ„Î±Î²Î¿Î»Î® Î•ÏƒÏŒÎ´Ï‰Î½" closable="false"/>
                                                        <Tab text="ÎœÎµÏ„Î±Î²Î¿Î»Î® Î•Î¾ÏŒÎ´Ï‰Î½" closable="false"/>
                                                    </tabs>
                                                </TabPane>
                                                
                                                <!-- Expenses Level Selection (shown only when Expenses tab is selected) -->
                                                <HBox fx:id="expensesLevelContainer" spacing="12" alignment="CENTER" visible="false" managed="false">
                                                    <children>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                        <ComboBox fx:id="simulationLevelComboBox" prefWidth="170.0" prefHeight="50" minHeight="50" maxHeight="50" onAction="#onSimulationLevelChanged"/>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                    </children>
                                                </HBox>
                                                
                                                <!-- Multiple Selection Table -->
                                                <TableView fx:id="simulationSelectionsTable" prefHeight="250" VBox.vgrow="ALWAYS">
                                                    <columns>
                                                        <TableColumn fx:id="simulationCheckColumn" text="" prefWidth="50" styleClass="check-box-table-cell"/>
                                                        <TableColumn fx:id="simulationCategoryColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="300"/>
                                                        <TableColumn fx:id="simulationAmountColumn" text="Î¤ÏÎ­Ï‡Î¿Î½ Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="150"/>
                                                        <TableColumn fx:id="simulationChangeColumn" text="ÎœÎµÏ„Î±Î²Î¿Î»Î® (%)" prefWidth="150"/>
                                                    </columns>
                                                </TableView>
                                                
                                                <!-- Default Change Percentage and Action Buttons -->
                                                <HBox spacing="12" alignment="CENTER_LEFT">
                                                    <children>
                                                        <Label text="Î ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· ÎœÎµÏ„Î±Î²Î¿Î»Î® (%):" styleClass="section-subtitle" minHeight="38" prefHeight="38" maxHeight="38"/>
                                                        <TextField fx:id="simulationDefaultChangeField" prefWidth="200" prefHeight="38" promptText="Ï€.Ï‡. 5% Î® -5%"/>
                                                        <Button text="Î•Ï†Î±ÏÎ¼Î¿Î³Î® ÏƒÎµ ÏŒÎ»ÎµÏ‚" onAction="#onApplyDefaultChange" styleClass="action-button" prefWidth="180" prefHeight="40"/>
                                                        <Button text="Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±" onAction="#onCalculateSimulationResults" styleClass="action-button" prefWidth="200" prefHeight="40"/>
                                                    </children>
                                                </HBox>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Results Display -->
                                        <VBox spacing="12" styleClass="section-card">
                                            <padding>
                                                <Insets top="24" right="24" bottom="24" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î‘Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î ÏÎ¿ÏƒÎ¿Î¼Î¿Î¯Ï‰ÏƒÎ·Ï‚" styleClass="section-title" style="-fx-font-size: 18px;"/>
                                                <TextArea fx:id="simulationResultsArea" prefHeight="300" editable="false" wrapText="true" styleClass="simulation-results"/>
                                            </children>
                                        </VBox>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- FOOTER -->
    <bottom>
        <HBox styleClass="footer-bar" spacing="16">
            <padding>
                <Insets top="12" right="32" bottom="12" left="32"/>
            </padding>
            <children>
                <Label text="e-budget v0.0.1" styleClass="footer-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Â© 2026 - AUEB DMST" styleClass="footer-text"/>
                <Label text="|" styleClass="footer-separator"/>
                <Label text="Î¤ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ·" styleClass="footer-link"/>
            </children>
        </HBox>
    </bottom>

</BorderPane>


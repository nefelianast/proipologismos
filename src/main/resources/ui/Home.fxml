<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.collections.FXCollections?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.ScrollPane?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="ui.HomeController"
            prefWidth="1400.0" prefHeight="900.0"
            styleClass="root-pane">

    <!-- HEADER -->
    <top>
        <VBox styleClass="header-container">
            <StackPane styleClass="header-bar">
                <children>
                    <!-- Background HBox Î³Î¹Î± Ï„Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ -->
                    <HBox spacing="0" alignment="CENTER_LEFT">
                        <children>
                            <!-- Î‘ÏÎ¹ÏƒÏ„ÎµÏÎ¬: ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ -->
                            <HBox alignment="CENTER_LEFT" HBox.hgrow="NEVER" spacing="12">
                                <children>
                                    <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÎ¿Ï€Î®ÏƒÎµÎ¹Ï‚ Î‘Î»Î»Î±Î³ÏÎ½ (Î³Î¹Î± ÏŒÎ»Î¿Ï…Ï‚) - Coming soon -->
                                    <Button text="Î ÏÎ¿ÎµÏ€Î¹ÏƒÎºÎ¿Ï€Î®ÏƒÎµÎ¹Ï‚ Î‘Î»Î»Î±Î³ÏÎ½" onAction="#onNavigateProjections" styleClass="auth-button" fx:id="projectionsButton"/>
                                    <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Î•Î¾ÎµÏÎµÏÎ½Î·ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ -->
                                    <Button text="ğŸ” Î•Î¾ÎµÏÎµÏÎ½Î·ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½" onAction="#onNavigateDataExploration" styleClass="auth-button"/>
                                </children>
                                <padding>
                                    <Insets top="0" right="0" bottom="0" left="32"/>
                                </padding>
                            </HBox>
                            
                            <Region HBox.hgrow="ALWAYS"/>
                            
                            <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Î£ÏÎ½Î´ÎµÏƒÎ·/Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ· Î´ÎµÎ¾Î¹Î¬ -->
                            <HBox alignment="CENTER_RIGHT" HBox.hgrow="NEVER">
                                <children>
                                    <Button fx:id="authButton" onAction="#onAuthButtonClicked" styleClass="auth-button"/>
                                </children>
                                <padding>
                                    <Insets top="0" right="32" bottom="0" left="0"/>
                                </padding>
                            </HBox>
                        </children>
                    </HBox>
                    
                    <!-- Logo centered -->
                    <VBox spacing="0" alignment="CENTER" StackPane.alignment="CENTER" mouseTransparent="true">
                        <children>
                            <Region prefHeight="15.0" mouseTransparent="true"/>
                            <ImageView fx:id="headerLogoImageView" mouseTransparent="true">
                                <image>
                                    <Image url="@/images/logo.png"/>
                                </image>
                                <fitWidth>300.0</fitWidth>
                                <preserveRatio>true</preserveRatio>
                            </ImageView>
                            <Region prefHeight="25.0" mouseTransparent="true"/>
                        </children>
                    </VBox>
                </children>
            </StackPane>
        </VBox>
    </top>

    <!-- CENTER CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="content-scroll">
            <content>
                <VBox spacing="24" styleClass="content-container">
                    <padding>
                        <Insets top="24" right="32" bottom="24" left="32"/>
                    </padding>
                    <children>
                        
                        <!-- HOME VIEW (Summary Cards) -->
                        <VBox fx:id="homeView" spacing="32" alignment="TOP_CENTER">
                            <children>
                                <!-- User Type Badge -->
                                <HBox spacing="8" alignment="CENTER" styleClass="user-type-badge-container">
                                    <children>
                                        <Label fx:id="userTypeIconLabel" text="ğŸ‘¤" style="-fx-font-size: 18px;"/>
                                        <Label fx:id="userTypeLabel" text="Î ÏÎ¿Î²Î¿Î»Î® Î Î¿Î»Î¯Ï„Î·" styleClass="user-type-badge"/>
                                    </children>
                                </HBox>
                                
                                <!-- YEAR SELECTION DROPDOWN -->
                                <HBox spacing="12" alignment="CENTER" styleClass="year-buttons-container">
                                    <children>
                                        <ComboBox fx:id="yearComboBox" onAction="#onYearSelected" styleClass="year-combo-box" prefWidth="170.0" prefHeight="50" minHeight="50" maxHeight="50"/>
                                        <Button fx:id="homeEditButton" onAction="#onNavigateDataManagement" styleClass="auth-button" visible="false" managed="false" prefWidth="170.0" prefHeight="50" minHeight="50" maxHeight="50">
                                            <graphic>
                                                <HBox spacing="6" alignment="CENTER">
                                                    <Label text="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" style="-fx-font-size: 15px; -fx-font-weight: 600; -fx-text-fill: #1e40af;"/>
                                                    <Label text="âœ" style="-fx-font-size: 20px; -fx-text-fill: #1e40af; -fx-rotate: -8;"/>
                                                </HBox>
                                            </graphic>
                                        </Button>
                                    </children>
                                </HBox>


                                <!-- SUMMARY CARDS -->
                                <HBox styleClass="summary-row" spacing="24" alignment="CENTER">
                                    <children>
                                        <VBox styleClass="summary-card" spacing="8">
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±" styleClass="summary-label"/>
                                                <Label fx:id="totalRevenuesLabel" text="â‚¬100,2 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="revenuesDeltaLabel" text="+2,3% Î±Ï€ÏŒ Ï€Î­ÏÏ…ÏƒÎ¹" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>

                                        <VBox styleClass="summary-card" spacing="8">
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="summary-label"/>
                                                <Label fx:id="totalExpensesLabel" text="â‚¬98,5 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="expensesDeltaLabel" text="+1,1% Î±Ï€ÏŒ Ï€Î­ÏÏ…ÏƒÎ¹" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>

                                        <VBox styleClass="summary-card" spacing="8">
                                            <children>
                                                <Label text="Î™ÏƒÎ¿Î¶ÏÎ³Î¹Î¿" styleClass="summary-label"/>
                                                <Label fx:id="balanceLabel" text="+â‚¬1,7 Î´Î¹Ïƒ." styleClass="summary-number"/>
                                                <Label fx:id="balanceStatusLabel" text="Î Î»ÎµÏŒÎ½Î±ÏƒÎ¼Î±" styleClass="summary-delta positive"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- QUICK NAVIGATION CARDS -->
                                <VBox spacing="16">
                                    <children>
                                        <HBox spacing="20" alignment="CENTER" styleClass="quick-nav-row">
                                            <children>
                                                <VBox styleClass="quick-nav-card" spacing="12" fx:id="quickNavMinistries" alignment="CENTER">
                                                    <children>
                                                        <Label text="1" styleClass="quick-nav-number"/>
                                                        <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î± &amp; Î¦Î¿ÏÎµÎ¯Ï‚" styleClass="quick-nav-title"/>
                                                        <Label text="Î‘Î½Î¬Î»Ï…ÏƒÎ· Î´Î±Ï€Î±Î½ÏÎ½ Î±Î½Î¬ Ï…Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿" styleClass="quick-nav-description"/>
                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± â†’" styleClass="quick-nav-link"/>
                                                    </children>
                                                </VBox>

                                                <VBox styleClass="quick-nav-card" spacing="12" fx:id="quickNavRevenues" alignment="CENTER">
                                                    <children>
                                                        <Label text="2" styleClass="quick-nav-number"/>
                                                        <Label text="ÎˆÏƒÎ¿Î´Î±" styleClass="quick-nav-title"/>
                                                        <Label text="ÎšÎ±Ï„Î±Î½Î¿Î¼Î® Ï„Ï‰Î½ ÎµÏƒÏŒÎ´Ï‰Î½ Î±Î½Î¬ ÎµÎ¯Î´Î¿Ï‚" styleClass="quick-nav-description"/>
                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± â†’" styleClass="quick-nav-link"/>
                                                    </children>
                                                </VBox>

                                                <VBox styleClass="quick-nav-card" spacing="12" fx:id="quickNavExpenses" alignment="CENTER">
                                                    <children>
                                                        <Label text="3" styleClass="quick-nav-number"/>
                                                        <Label text="Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="quick-nav-title"/>
                                                        <Label text="ÎšÎ±Ï„Î±Î½Î¿Î¼Î® Ï„Ï‰Î½ Î´Î±Ï€Î±Î½ÏÎ½ Î±Î½Î¬ ÎµÎ¯Î´Î¿Ï‚" styleClass="quick-nav-description"/>
                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± â†’" styleClass="quick-nav-link"/>
                                                    </children>
                                                </VBox>

                                                <VBox styleClass="quick-nav-card" spacing="12" fx:id="quickNavAdministrations" alignment="CENTER">
                                                    <children>
                                                        <Label text="4" styleClass="quick-nav-number"/>
                                                        <Label text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½ÎµÏ‚ Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÎ¹Ï‚" styleClass="quick-nav-title"/>
                                                        <Label text="Î“ÎµÏ‰Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î±Î½Î¿Î¼Î® Ï„Ï‰Î½ Î´Î±Ï€Î±Î½ÏÎ½" styleClass="quick-nav-description"/>
                                                        <Label text="Î”ÎµÎ¯Ï„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ± â†’" styleClass="quick-nav-link"/>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>

                            </children>
                        </VBox>

                        <!-- MINISTRIES VIEW -->
                        <VBox fx:id="ministriesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î± &amp; Î¦Î¿ÏÎµÎ¯Ï‚" styleClass="section-title"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="categoryTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="categoryColumn" text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿ / Î¦Î¿ÏÎ­Î±Ï‚" prefWidth="400"/>
                                                <TableColumn fx:id="amountColumn" text="Î”Î±Ï€Î¬Î½ÎµÏ‚ (â‚¬)" prefWidth="220"/>
                                                <TableColumn fx:id="percentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="180"/>
                                                <TableColumn fx:id="changeColumn" text="ÎœÎµÏ„Î±Î²Î¿Î»Î® Î±Ï€ÏŒ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Î­Ï„Î¿Ï‚" prefWidth="250"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- REVENUES VIEW -->
                        <VBox fx:id="revenuesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Label text="ÎˆÏƒÎ¿Î´Î±" styleClass="section-title"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="revenuesTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="revenueCategoryColumn" text="Î•Î¯Î´Î¿Ï‚ ÎˆÏƒÎ¿Î´Ï‰Î½" prefWidth="450"/>
                                                <TableColumn fx:id="revenueAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="revenuePercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- EXPENSES VIEW -->
                        <VBox fx:id="expensesView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Label text="Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="section-title"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="expensesTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="expenseCategoryColumn" text="Î•Î¯Î´Î¿Ï‚ Î”Î±Ï€Î±Î½ÏÎ½" prefWidth="450"/>
                                                <TableColumn fx:id="expenseAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="expensePercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- ADMINISTRATIONS VIEW -->
                        <VBox fx:id="administrationsView" spacing="16" visible="false" managed="false">
                            <children>
                                <VBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <HBox spacing="16" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button"/>
                                                <Label text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½ÎµÏ‚ Î”Î¹Î¿Î¹ÎºÎ®ÏƒÎµÎ¹Ï‚" styleClass="section-title"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                <VBox styleClass="section-card" spacing="16">
                                    <padding>
                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                    </padding>
                                    <children>
                                        <TableView fx:id="administrationsTable" prefHeight="600">
                                            <columns>
                                                <TableColumn fx:id="adminCategoryColumn" text="Î‘Ï€Î¿ÎºÎµÎ½Ï„ÏÏ‰Î¼Î­Î½Î· Î”Î¹Î¿Î¯ÎºÎ·ÏƒÎ·" prefWidth="550"/>
                                                <TableColumn fx:id="adminAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="280"/>
                                                <TableColumn fx:id="adminPercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="220"/>
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- DATA MANAGEMENT VIEW (Government Only) -->
                        <VBox fx:id="dataManagementView" spacing="20" alignment="TOP_CENTER" visible="false" managed="false" styleClass="data-management-container">
                            <children>
                                <!-- Header Section -->
                                <VBox spacing="20" styleClass="section-card header-section" alignment="CENTER">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Top Row: Back Button and Title -->
                                        <HBox spacing="16" alignment="CENTER">
                                            <children>
                                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button-modern" prefWidth="140" prefHeight="38"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label fx:id="dataManagementYearTitleLabel" text="Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÎˆÏ„Î¿Ï…Ï‚ 2026" styleClass="page-title-centered"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Region prefWidth="140"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Year Selection and Publish Button -->
                                        <HBox spacing="16" alignment="CENTER">
                                            <children>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <VBox spacing="4" alignment="CENTER">
                                                    <Label text="ÎˆÏ„Î¿Ï‚ Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" styleClass="field-label"/>
                                                    <ComboBox fx:id="dataManagementYearComboBox" prefWidth="140" prefHeight="40" onAction="#onDataManagementYearSelected" styleClass="year-selector-centered"/>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Button fx:id="publishYearButton" text="Î”Î·Î¼Î¿ÏƒÎ¯ÎµÏ…ÏƒÎ· Î ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î¿Ï" onAction="#onPublishYear" styleClass="publish-button" prefWidth="240" prefHeight="40" visible="false" managed="false"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                
                                <!-- Statistics Summary Cards -->
                                <HBox spacing="16" alignment="CENTER" styleClass="stats-container">
                                    <padding>
                                        <Insets left="80" right="80"/>
                                    </padding>
                                    <children>
                                        <!-- Revenues Card -->
                                        <VBox spacing="12" styleClass="stat-card revenue-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±" styleClass="stat-label"/>
                                                <Label fx:id="dmTotalRevenuesLabel" text="0 â‚¬" styleClass="stat-value-large revenue-value"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Expenses Card -->
                                        <VBox spacing="12" styleClass="stat-card expense-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="stat-label"/>
                                                <Label fx:id="dmTotalExpensesLabel" text="0 â‚¬" styleClass="stat-value-large expense-value"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Balance Card -->
                                        <VBox spacing="12" styleClass="stat-card balance-stat-card" HBox.hgrow="ALWAYS" alignment="CENTER" style="-fx-border-color: #94a3b8; -fx-border-width: 3px; -fx-border-radius: 16px; -fx-background-color: #f8fafc;">
                                            <padding>
                                                <Insets top="28" right="24" bottom="28" left="24"/>
                                            </padding>
                                            <children>
                                                <Label text="Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿" styleClass="stat-label"/>
                                                <Label fx:id="dmBalanceLabel" text="0 â‚¬" styleClass="stat-value-large balance-value"/>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                                
                                <!-- Main Data Table Card -->
                                <VBox spacing="20" styleClass="section-card data-table-section">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <!-- Action Buttons Row -->
                                        <HBox spacing="12" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·" onAction="#onAddData" styleClass="action-button primary-action" prefWidth="140" prefHeight="40"/>
                                                <Button text="ğŸ“¥ Î•Î¹ÏƒÎ±Î³Ï‰Î³Î®" onAction="#onImportData" styleClass="action-button" prefWidth="130" prefHeight="40"/>
                                                <Button text="ğŸ“¤ Î•Î¾Î±Î³Ï‰Î³Î®" onAction="#onExportData" styleClass="action-button" prefWidth="120" prefHeight="40"/>
                                                <Button text="ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Scenario" onAction="#onSaveScenario" styleClass="action-button" prefWidth="180" prefHeight="40"/>
                                                <Button text="ğŸ“‚ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Scenario" onAction="#onLoadScenario" styleClass="action-button" prefWidth="170" prefHeight="40"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Search and Filter Bar -->
                                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="search-filter-bar">
                                            <padding>
                                                <Insets top="12" right="16" bottom="12" left="16"/>
                                            </padding>
                                            <children>
                                                <HBox spacing="8" alignment="CENTER_LEFT">
                                                    <Label text="ğŸ”" style="-fx-font-size: 18px;"/>
                                                    <TextField fx:id="dmSearchField" promptText="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚..." prefWidth="280" prefHeight="38" onKeyReleased="#onSearchData" styleClass="search-field"/>
                                                </HBox>
                                                <ComboBox fx:id="dmTypeFilter" promptText="ÎŒÎ»Î¿Î¹ Î¿Î¹ Ï„ÏÏ€Î¿Î¹" prefWidth="160" prefHeight="38" onAction="#onFilterData" styleClass="filter-combo"/>
                                                <Button text="ğŸ”„ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚" onAction="#onClearFilters" styleClass="clear-filter-button" prefWidth="140" prefHeight="38"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Label fx:id="dmRecordCountLabel" text="0 ÎµÎ³Î³ÏÎ±Ï†Î­Ï‚" styleClass="record-count-label"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Revenues Table -->
                                        <VBox spacing="12" styleClass="table-section">
                                            <HBox spacing="8" alignment="CENTER_LEFT">
                                                <Label text="ğŸ’°" style="-fx-font-size: 20px;"/>
                                                <Label text="ÎˆÏƒÎ¿Î´Î±" styleClass="table-section-title"/>
                                            </HBox>
                                            <TableView fx:id="dmRevenuesTable" prefHeight="250" styleClass="data-table">
                                                <columns>
                                                    <TableColumn fx:id="revCategoryColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="300" sortable="true"/>
                                                    <TableColumn fx:id="revAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="180" sortable="true"/>
                                                    <TableColumn fx:id="revPercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="150" sortable="true"/>
                                                    <TableColumn fx:id="revChangeColumn" text="Î‘Î»Î»Î±Î³Î® Î±Ï€ÏŒ Î ÏÎ¿Î·Î³. ÎˆÏ„Î¿Ï‚" prefWidth="200" sortable="true"/>
                                                    <TableColumn fx:id="revStatusColumn" text="ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·" prefWidth="150" sortable="true"/>
                                                    <TableColumn fx:id="revCommentsColumn" text="Î£Ï‡ÏŒÎ»Î¹Î±" prefWidth="250" sortable="false"/>
                                                </columns>
                                            </TableView>
                                        </VBox>
                                        
                                        <Region prefHeight="20" VBox.vgrow="NEVER"/>
                                        
                                        <!-- Expenses Table -->
                                        <VBox spacing="12" styleClass="table-section">
                                            <HBox spacing="8" alignment="CENTER_LEFT">
                                                <Label text="ğŸ’¸" style="-fx-font-size: 20px;"/>
                                                <Label text="Î”Î±Ï€Î¬Î½ÎµÏ‚" styleClass="table-section-title"/>
                                            </HBox>
                                            <TableView fx:id="dmExpensesTable" prefHeight="250" styleClass="data-table">
                                                <columns>
                                                    <TableColumn fx:id="expCategoryColumn" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="300" sortable="true"/>
                                                    <TableColumn fx:id="expAmountColumn" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="180" sortable="true"/>
                                                    <TableColumn fx:id="expPercentageColumn" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="150" sortable="true"/>
                                                    <TableColumn fx:id="expChangeColumn" text="Î‘Î»Î»Î±Î³Î® Î±Ï€ÏŒ Î ÏÎ¿Î·Î³. ÎˆÏ„Î¿Ï‚" prefWidth="200" sortable="true"/>
                                                    <TableColumn fx:id="expStatusColumn" text="ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·" prefWidth="150" sortable="true"/>
                                                    <TableColumn fx:id="expCommentsColumn" text="Î£Ï‡ÏŒÎ»Î¹Î±" prefWidth="250" sortable="false"/>
                                                </columns>
                                            </TableView>
                                        </VBox>
                                        
                                        <!-- Table Actions -->
                                        <HBox spacing="12" alignment="CENTER_LEFT" styleClass="table-actions-bar">
                                            <padding>
                                                <Insets top="12" right="0" bottom="0" left="0"/>
                                            </padding>
                                            <children>
                                                <Button text="âœï¸ Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" onAction="#onEditData" styleClass="table-action-button" fx:id="editDataButton" disable="true" prefWidth="140" prefHeight="38"/>
                                                <Button text="ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î®" onAction="#onDeleteData" styleClass="table-action-button danger" fx:id="deleteDataButton" disable="true" prefWidth="130" prefHeight="38"/>
                                                <Button text="ğŸ“ ÎœÎ±Î¶Î¹ÎºÎ® Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" onAction="#onBulkEdit" styleClass="table-action-button" fx:id="bulkEditButton" disable="true" prefWidth="180" prefHeight="38"/>
                                                <Region HBox.hgrow="ALWAYS"/>
                                                <Button text="âœ“ Î•Ï€Î¹Î»Î¿Î³Î® ÎŒÎ»Ï‰Î½" onAction="#onSelectAll" styleClass="table-action-button secondary" prefWidth="140" prefHeight="38"/>
                                                <Button text="âœ— Î‘Ï€Î¿ÎµÏ€Î¹Î»Î¿Î³Î®" onAction="#onDeselectAll" styleClass="table-action-button secondary" prefWidth="130" prefHeight="38"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                                
                                <!-- Internal Comments Section -->
                                <VBox spacing="16" styleClass="section-card comments-section">
                                    <padding>
                                        <Insets top="24" right="80" bottom="24" left="80"/>
                                    </padding>
                                    <children>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <Label text="ğŸ’¬" style="-fx-font-size: 20px;"/>
                                            <Label text="Î•ÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬ Î£Ï‡ÏŒÎ»Î¹Î±" styleClass="section-title"/>
                                        </HBox>
                                        <Label text="Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ ÏƒÏ‡ÏŒÎ»Î¹Î± ÎºÎ±Î¹ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± (Î¿ÏÎ±Ï„Î¬ Î¼ÏŒÎ½Î¿ ÏƒÏ„Î·Î½ ÎºÏ…Î²Î­ÏÎ½Î·ÏƒÎ·)" styleClass="section-subtitle" style="-fx-text-fill: #64748b; -fx-font-size: 13px;"/>
                                        <TextArea fx:id="internalCommentsArea" prefRowCount="5" wrapText="true" promptText="Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ ÎµÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ¬ ÏƒÏ‡ÏŒÎ»Î¹Î±..." styleClass="comments-textarea"/>
                                        <HBox spacing="12" alignment="CENTER_RIGHT">
                                            <children>
                                                <Button text="ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î£Ï‡Î¿Î»Î¯Ï‰Î½" onAction="#onSaveComments" styleClass="save-comments-button" prefWidth="180" prefHeight="38"/>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>
                        
                        <!-- DATA EXPLORATION VIEW -->
                        <VBox fx:id="dataExplorationView" spacing="16" visible="false" managed="false">
                            <children>
                                <Button text="â† Î‘ÏÏ‡Î¹ÎºÎ®" onAction="#onNavigateHome" styleClass="back-button"/>
                                
                                <HBox spacing="20" alignment="TOP_LEFT">
                                    <children>
                                        <!-- Sidebar with view categories -->
                                        <VBox spacing="12" styleClass="exploration-sidebar" prefWidth="280">
                                            <padding>
                                                <Insets top="20" right="16" bottom="20" left="16"/>
                                            </padding>
                                            <children>
                                                <Label text="Î¤ÏÏ€Î¿Ï‚ Î ÏÎ¿Î²Î¿Î»Î®Ï‚" styleClass="section-title" style="-fx-font-size: 16px;"/>
                                                
                                                <Button text="ğŸ“Š Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ ÎˆÏƒÎ¿Î´Î±/Î”Î±Ï€Î¬Î½ÎµÏ‚" onAction="#onSelectExplorationView" fx:id="exploreTotalButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="ğŸ›ï¸ Î‘Î½Î¬ Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿" onAction="#onSelectExplorationView" fx:id="exploreMinistryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="ğŸ’° Î‘Î½Î¬ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÎˆÏƒÏŒÎ´Ï‰Î½" onAction="#onSelectExplorationView" fx:id="exploreRevenueCategoryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="ğŸ’¸ Î‘Î½Î¬ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î”Î±Ï€Î±Î½ÏÎ½" onAction="#onSelectExplorationView" fx:id="exploreExpenseCategoryButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="ğŸ“ˆ Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Î•Ï„ÏÎ½" onAction="#onSelectExplorationView" fx:id="exploreYearComparisonButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                                <Button text="ğŸ“‰ Î¤Î¬ÏƒÎµÎ¹Ï‚ &amp; Î‘Î»Î»Î±Î³Î­Ï‚" onAction="#onSelectExplorationView" fx:id="exploreTrendsButton" styleClass="exploration-category-button" style="-fx-alignment: CENTER_LEFT;"/>
                                            </children>
                                        </VBox>
                                        
                                        <!-- Main content area -->
                                        <VBox spacing="16" HBox.hgrow="ALWAYS">
                                            <children>
                                                <!-- Filters and controls -->
                                                <HBox spacing="12" alignment="CENTER_LEFT" styleClass="section-card">
                                                    <padding>
                                                        <Insets top="16" right="20" bottom="16" left="20"/>
                                                    </padding>
                                                    <children>
                                                        <Label text="ÎˆÏ„Î¿Ï‚:" styleClass="section-subtitle"/>
                                                        <ComboBox fx:id="exploreYearComboBox" prefWidth="120" onAction="#onExploreYearSelected"/>
                                                        <Region HBox.hgrow="ALWAYS"/>
                                                        
                                                        <!-- Dynamic filters based on selected view -->
                                                        <VBox fx:id="exploreDynamicFilters" spacing="8" visible="false" managed="false">
                                                            <children>
                                                                <Label text="Î¥Ï€Î¿Ï…ÏÎ³ÎµÎ¯Î¿:" styleClass="section-subtitle" fx:id="exploreMinistryLabel" visible="false" managed="false"/>
                                                                <ComboBox fx:id="exploreMinistryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                                
                                                                <Label text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± ÎˆÏƒÏŒÎ´Ï‰Î½:" styleClass="section-subtitle" fx:id="exploreRevenueCategoryLabel" visible="false" managed="false"/>
                                                                <ComboBox fx:id="exploreRevenueCategoryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                                
                                                                <Label text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î± Î”Î±Ï€Î±Î½ÏÎ½:" styleClass="section-subtitle" fx:id="exploreExpenseCategoryLabel" visible="false" managed="false"/>
                                                                <ComboBox fx:id="exploreExpenseCategoryComboBox" prefWidth="250" visible="false" managed="false" onAction="#onExploreFilterChanged"/>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                                
                                                <!-- Results table -->
                                                <VBox spacing="12" styleClass="section-card" HBox.hgrow="ALWAYS">
                                                    <padding>
                                                        <Insets top="24" right="24" bottom="24" left="24"/>
                                                    </padding>
                                                    <children>
                                                        <Label fx:id="exploreViewTitleLabel" text="Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„ÏÏ€Î¿ Ï€ÏÎ¿Î²Î¿Î»Î®Ï‚" styleClass="section-title"/>
                                                        <Label fx:id="exploreViewDescriptionLabel" text="" styleClass="section-subtitle"/>
                                                        
                                                        <TableView fx:id="exploreResultsTable" prefHeight="500">
                                                            <columns>
                                                                <TableColumn fx:id="exploreColumn1" text="ÎˆÏ„Î¿Ï‚" prefWidth="100" sortable="true"/>
                                                                <TableColumn fx:id="exploreColumn2" text="ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±" prefWidth="300" sortable="true"/>
                                                                <TableColumn fx:id="exploreColumn3" text="Î Î¿ÏƒÏŒ (â‚¬)" prefWidth="180" sortable="true"/>
                                                                <TableColumn fx:id="exploreColumn4" text="Î£Ï…Î¼Î¼ÎµÏ„Î¿Ï‡Î® (%)" prefWidth="150" sortable="true"/>
                                                                <TableColumn fx:id="exploreColumn5" text="Î‘Î»Î»Î±Î³Î®" prefWidth="150" sortable="true"/>
                                                            </columns>
                                                        </TableView>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </VBox>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- FOOTER -->
    <bottom>
        <HBox styleClass="footer-bar" spacing="16">
            <padding>
                <Insets top="12" right="32" bottom="12" left="32"/>
            </padding>
            <children>
                <Label text="eProipologismos v0.0.1" styleClass="footer-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Â© 2025 - ÎŸÎ¼Î¬Î´Î± Î‘Î½Î¬Ï€Ï„Ï…Î¾Î·Ï‚" styleClass="footer-text"/>
                <Label text="|" styleClass="footer-separator"/>
                <Label text="Î¤ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ·" styleClass="footer-link"/>
            </children>
        </HBox>
    </bottom>

</BorderPane>